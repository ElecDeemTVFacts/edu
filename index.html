<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Z√°klady elektrick√© veliƒçiny ‚Äì Interaktivn√≠ graf</title>
<style>
  :root {
    --clr-bg: #f4f4f9;
    --clr-text: #222;
    --clr-primary: #007acc;
    --clr-secondary: #005f99;
    --clr-table-header: #004466;
    --clr-volt: #d9534f;
    --clr-current: #5bc0de;
    --clr-resistance: #5cb85c;
    --clr-bg-dark: #121212;
    --clr-text-dark: #eee;
  }
  body {
    background: var(--clr-bg);
    color: var(--clr-text);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 1rem 1.5rem;
  }
  body.dark {
    background: var(--clr-bg-dark);
    color: var(--clr-text-dark);
  }
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }
  h1 {
    margin: 0;
    font-size: 1.8rem;
  }
  button#toggleDark {
    background: var(--clr-primary);
    color: white;
    border: none;
    padding: 0.4rem 1rem;
    font-size: 1rem;
    border-radius: 4px;
    cursor: pointer;
  }
  button#toggleDark:hover {
    background: var(--clr-secondary);
  }
  main {
    max-width: 900px;
    margin: auto;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1.5rem;
  }
  thead {
    background: var(--clr-table-header);
    color: white;
  }
  th, td {
    padding: 0.6rem 0.8rem;
    border: 1px solid #ccc;
    text-align: center;
  }
  body.dark table thead {
    background: #004050;
  }
  input[type="range"] {
    width: 100%;
    margin: 0.3rem 0 1rem;
  }
  label {
    font-weight: 600;
  }
  .slider-group {
    margin-bottom: 1.2rem;
  }
  #graphContainer {
    text-align: center;
    margin-bottom: 2rem;
  }
  canvas {
    max-width: 100%;
    border: 1px solid #aaa;
    background: white;
    border-radius: 6px;
  }
  body.dark canvas {
    background: #222;
    border-color: #555;
  }
  .calc {
    border: 1px solid #ddd;
    padding: 1rem;
    border-radius: 6px;
    margin-bottom: 3rem;
    background: #fff;
  }
  body.dark .calc {
    background: #1a1a1a;
    border-color: #333;
  }
  .calc label {
    display: block;
    margin: 0.5rem 0 0.2rem;
  }
  .calc input[type="number"] {
    width: 100%;
    padding: 0.3rem 0.5rem;
    font-size: 1rem;
  }
  .calc button {
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    font-size: 1rem;
    background: var(--clr-primary);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  .calc button:hover {
    background: var(--clr-secondary);
  }
  .calc-result {
    margin-top: 1rem;
    font-weight: 700;
    color: var(--clr-primary);
  }
</style>
</head>
<body>
<header>
  <h1>Z√°klady elektrick√© veliƒçiny</h1>
  <button id="toggleDark" aria-pressed="false" aria-label="P≈ôepnout tmav√Ω re≈æim">üåô Tmav√Ω re≈æim</button>
</header>

<main>
  <section aria-label="Tabulka z√°kladn√≠ch elektrick√Ωch veliƒçin">
    <h2>Z√°kladn√≠ elektrick√© veliƒçiny</h2>
    <input type="search" id="filterInput" placeholder="Filtrovat tabulku..." aria-label="Filtrovat tabulku z√°kladn√≠ch veliƒçin" />
    <table id="unitsTable" aria-describedby="tableDesc">
      <caption id="tableDesc">Tabulka z√°kladn√≠ch elektrick√Ωch veliƒçin a jejich jednotek</caption>
      <thead>
        <tr>
          <th>N√°zev veliƒçiny</th>
          <th>Znaƒçka</th>
          <th>N√°zev jednotky</th>
          <th>Znaƒçka jednotky</th>
        </tr>
      </thead>
      <tbody>
      <tr><td>Elektrick√© napƒõt√≠</td><td>U</td><td>Volt</td><td>V</td></tr>
      <tr><td>Elektrick√Ω proud</td><td>I</td><td>Amp√©r</td><td>A</td></tr>
      <tr><td>Elektrick√Ω odpor</td><td>R</td><td>Ohm</td><td>Œ©</td></tr>
      <tr><td>Zd√°nliv√Ω odpor (impedance)</td><td>Z</td><td>Ohm</td><td>Œ©</td></tr>
      <tr><td>Reaktance kapacitn√≠</td><td>Xc</td><td>Ohm</td><td>Œ©</td></tr>
      <tr><td>Reaktance induktivn√≠</td><td>XL</td><td>Ohm</td><td>Œ©</td></tr>
      <tr><td>Elektrick√Ω v√Ωkon</td><td>P</td><td>Watt</td><td>W</td></tr>
      <tr><td>Elektrick√° vodivost</td><td>G</td><td>Siemens</td><td>S</td></tr>
      <tr><td>Elektrick√Ω n√°boj</td><td>Q</td><td>Coulomb</td><td>C</td></tr>
      <tr><td>Kapacita</td><td>C</td><td>Farad</td><td>F</td></tr>
      <tr><td>Indukƒçnost</td><td>L</td><td>Henry</td><td>H</td></tr>
      <tr><td>Kmitoƒçet</td><td>f</td><td>Hertz</td><td>Hz</td></tr>
      <tr><td>ƒåas</td><td>t</td><td>Sekunda</td><td>s</td></tr>
      <tr><td>Sv√≠tivost</td><td>I</td><td>Kandela</td><td>cd</td></tr>
      <tr><td>L√°tkov√© mno≈æstv√≠</td><td>n</td><td>Mol</td><td>mol</td></tr>
      <tr><td>Rovinn√Ω √∫hel</td><td>Œ±</td><td>Radi√°n</td><td>rad</td></tr>
      <tr><td>Prostorov√Ω √∫hel</td><td>Œ©</td><td>Steradi√°n</td><td>sr</td></tr>
      <tr><td>Termodynamick√° teplota</td><td>T</td><td>Kelvin</td><td>K</td></tr>
      </tbody>
    </table>
  </section>

  <section aria-label="Interaktivn√≠ graf vztahu U, I a R">
    <h2>Interaktivn√≠ graf vztahu napƒõt√≠, proudu a odporu</h2>
    <p>Vyberte dvƒõ veliƒçiny pomoc√≠ posuvn√≠k≈Ø, t≈ôet√≠ se dopoƒç√≠t√° podle Ohmova z√°kona <code>U = I √ó R</code>.</p>

    <div class="slider-group">
      <label for="sliderU">Napƒõt√≠ U [V]: <output id="outU">10</output> V</label>
      <input type="range" id="sliderU" min="0" max="100" step="0.1" value="10" aria-valuemin="0" aria-valuemax="100" aria-valuenow="10" />
    </div>
    <div class="slider-group">
      <label for="sliderI">Proud I [A]: <output id="outI">2</output> A</label>
      <input type="range" id="sliderI" min="0" max="20" step="0.01" value="2" aria-valuemin="0" aria-valuemax="20" aria-valuenow="2" />
    </div>
    <div class="slider-group">
      <label for="sliderR">Odpor R [Œ©]: <output id="outR">5</output> Œ©</label>
      <input type="range" id="sliderR" min="0" max="50" step="0.01" value="5" aria-valuemin="0" aria-valuemax="50" aria-valuenow="5" />
    </div>

    <div id="graphContainer" aria-live="polite">
      <canvas id="ohmGraph" width="600" height="300" role="img" aria-label="Graf vztahu napƒõt√≠, proudu a odporu"></canvas>
    </div>
  </section>

  <section aria-label="Ohmova kalkulaƒçka">
    <h2>Ohmova kalkulaƒçka</h2>
    <p>Zadejte libovoln√© dvƒõ veliƒçiny a kalkulaƒçka spoƒç√≠t√° t≈ôet√≠ podle vzorce <code>U = I √ó R</code>.</p>

    <div class="calc">
      <label for="inputVoltage">Napƒõt√≠ (U) ve voltech [V]</label>
      <input type="number" id="inputVoltage" placeholder="Napƒõt√≠ v V" min="0" step="any" />

      <label for="inputCurrent">Proud (I) v amp√©rech [A]</label>
      <input type="number" id="inputCurrent" placeholder="Proud v A" min="0" step="any" />

      <label for="inputResistance">Odpor (R) v ohmech [Œ©]</label>
      <input type="number" id="inputResistance" placeholder="Odpor v Œ©" min="0" step="any" />

      <button id="calcBtn" aria-label="Spoƒç√≠tat chybƒõj√≠c√≠ veliƒçinu">Spoƒç√≠tat</button>

      <div class="calc-result" aria-live="polite" id="calcResult"></div>
    </div>
  </section>
</main>

<footer>
  &copy; 2025 Edukace Elektrika. V≈°echny pr√°va vyhrazena.
</footer>

<script>
  // --- Tmav√Ω re≈æim toggle ---
  const toggleDark = document.getElementById('toggleDark');
  toggleDark.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    const isDark = document.body.classList.contains('dark');
    toggleDark.textContent = isDark ? '‚òÄÔ∏è Svƒõtl√Ω re≈æim' : 'üåô Tmav√Ω re≈æim';
    toggleDark.setAttribute('aria-pressed', isDark);
  });

  // --- Filtrov√°n√≠ tabulky ---
  const filterInput = document.getElementById('filterInput');
  const table = document.getElementById('unitsTable');
  filterInput.addEventListener('input', () => {
    const filter = filterInput.value.toLowerCase();
    const trs = table.tBodies[0].rows;
    for(let row of trs){
      const text = row.textContent.toLowerCase();
      row.style.display = text.includes(filter) ? '' : 'none';
    }
  });

  // --- Interaktivn√≠ graf a posuvn√≠ky ---
  const sliderU = document.getElementById('sliderU');
  const sliderI = document.getElementById('sliderI');
  const sliderR = document.getElementById('sliderR');
  const outU = document.getElementById('outU');
  const outI = document.getElementById('outI');
  const outR = document.getElementById('outR');
  const canvas = document.getElementById('ohmGraph');
  const ctx = canvas.getContext('2d');

  // Pro sledov√°n√≠, kter√© dva jsou "zad√°ny" u≈æivatelem
  // V≈ædy dva z nich se mƒõn√≠, t≈ôet√≠ je dopoƒç√≠t√°n
  // Poƒç√°teƒçn√≠ stav: v≈°echny 3 hodnoty jsou vyplnƒõn√©, ale u≈æivatel m≈Ø≈æe mƒõnit posuvn√≠ky

  // Pomocn√° funkce na vykreslen√≠ grafu
  function drawGraph(U, I, R) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Nastaven√≠ pozad√≠
    ctx.fillStyle = getComputedStyle(document.body).backgroundColor;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Osy
    ctx.strokeStyle = getComputedStyle(document.body).color;
    ctx.lineWidth = 2;

    // Osa X - Proud (I) od 0 do 20 A (canvas.width = 600)
    ctx.beginPath();
    ctx.moveTo(50, canvas.height - 50);
    ctx.lineTo(canvas.width - 20, canvas.height - 50);
    ctx.stroke();

    // Osa Y - Napƒõt√≠ (U) od 0 do 100 V (canvas.height = 300)
    ctx.beginPath();
    ctx.moveTo(50, canvas.height - 50);
    ctx.lineTo(50, 20);
    ctx.stroke();

    // Popisky os
    ctx.fillStyle = getComputedStyle(document.body).color;
    ctx.font = "14px Arial";
    ctx.fillText("Proud I [A]", canvas.width / 2, canvas.height - 15);
    ctx.save();
    ctx.translate(15, canvas.height / 2);
    ctx.rotate(-Math.PI / 2);
    ctx.fillText("Napƒõt√≠ U [V]", 0, 0);
    ctx.restore();

    // Vykresl√≠me ƒç√°ru podle U = I √ó R
    // Vypoƒçteme body pro proud od 0 do max (20)
    ctx.strokeStyle = 'rgba(217, 83, 79, 0.9)'; // ƒçerven√° pro napƒõt√≠
    ctx.lineWidth = 3;
    ctx.beginPath();

    // P≈ôevod hodnot do sou≈ôadnic:
    // x: proud I (0-20) -> 50-580 px
    // y: napƒõt√≠ U (0-100) -> 250-20 px (invertov√°no)

    for(let i=0; i<=20; i+=0.1) {
      let u = i * R;
      if (u > 100) break;
      let x = 50 + (i / 20) * 530;
      let y = canvas.height - 50 - (u / 100) * 230;
      if(i===0){
        ctx.moveTo(x,y);
      } else {
        ctx.lineTo(x,y);
      }
    }
    ctx.stroke();

    // Vykresl√≠me bod aktu√°ln√≠ hodnoty (I,U)
    let xCur = 50 + (I / 20) * 530;
    let yCur = canvas.height - 50 - (U / 100) * 230;

    // Bod proudu I
    ctx.fillStyle = 'rgba(91, 192, 222, 1)'; // modr√°
    ctx.beginPath();
    ctx.arc(xCur, canvas.height - 50, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText(`I = ${I.toFixed(2)} A`, xCur + 10, canvas.height - 55);

    // Bod napƒõt√≠ U
    ctx.fillStyle = 'rgba(217, 83, 79, 1)'; // ƒçerven√°
    ctx.beginPath();
    ctx.arc(50, yCur, 6, 0, 2 * Math.PI);
    ctx.fill();
    ctx.fillText(`U = ${U.toFixed(2)} V`, 10, yCur - 10);

    // Bod odporu R (zobrazen jako text, ne v grafu)
    ctx.fillStyle = getComputedStyle(document.body).color;
    ctx.font = "16px Arial";
    ctx.fillText(`Odpor R = ${R.toFixed(2)} Œ©`, canvas.width - 180, 30);
  }

  // Aktualizace hodnot a dopoƒçet t≈ôet√≠ veliƒçiny podle toho, co se mƒõn√≠
  // Abychom to udƒõlali intuitivnƒõ, p≈ôi zmƒõnƒõ jednoho slideru poƒç√≠t√°me t≈ôet√≠ podle Ohmova z√°kona
  // U = I √ó R

  // Logika: pokud u≈æivatel mƒõn√≠ U, tak po zmƒõnƒõ p≈ôepoƒçteme R = U / I, pokud I != 0  
  // pokud mƒõn√≠ I, p≈ôepoƒçteme R = U / I pokud I != 0  
  // pokud mƒõn√≠ R, p≈ôepoƒçteme U = I √ó R

  // Pro p≈ôepoƒçty pot≈ôebujeme vƒõdƒõt, co u≈æivatel pr√°vƒõ mƒõn√≠. P≈ôid√°me event listeners.

  // Default hodnoty
  let U_val = parseFloat(sliderU.value);
  let I_val = parseFloat(sliderI.value);
  let R_val = parseFloat(sliderR.value);

  // Posledn√≠ posuvn√≠k, kter√Ω u≈æivatel mƒõnil (pro rozhodnut√≠, co se p≈ôepoƒç√≠t√°)
  let lastChanged = 'R'; // inicializov√°no na R (kdy≈æ zaƒç√≠n√°me, je v≈°e vyplnƒõno)

  function updateOutputs() {
    outU.textContent = U_val.toFixed(2);
    outI.textContent = I_val.toFixed(2);
    outR.textContent = R_val.toFixed(2);

    sliderU.setAttribute('aria-valuenow', U_val.toFixed(2));
    sliderI.setAttribute('aria-valuenow', I_val.toFixed(2));
    sliderR.setAttribute('aria-valuenow', R_val.toFixed(2));
  }

  function recalcFromLastChanged() {
    if (lastChanged === 'U') {
      if (I_val !== 0) {
        R_val = U_val / I_val;
      } else {
        R_val = 0;
      }
      sliderR.value = R_val;
    } else if (lastChanged === 'I') {
      if (I_val !== 0) {
        R_val = U_val / I_val;
      } else {
        R_val = 0;
      }
      sliderR.value = R_val;
    } else if (lastChanged === 'R') {
      U_val = I_val * R_val;
      sliderU.value = U_val;
    }
  }

  sliderU.addEventListener('input', () => {
    lastChanged = 'U';
    U_val = parseFloat(sliderU.value);
    // P≈ôepoƒç√≠t√°me R
    recalcFromLastChanged();
    updateOutputs();
    drawGraph(U_val, I_val, R_val);
  });

  sliderI.addEventListener('input', () => {
    lastChanged = 'I';
    I_val = parseFloat(sliderI.value);
    recalcFromLastChanged();
    updateOutputs();
    drawGraph(U_val, I_val, R_val);
  });

  sliderR.addEventListener('input', () => {
    lastChanged = 'R';
    R_val = parseFloat(sliderR.value);
    recalcFromLastChanged();
    updateOutputs();
    drawGraph(U_val, I_val, R_val);
  });

  // Inicialn√≠ vykreslen√≠ grafu a hodnoty
  updateOutputs();
  drawGraph(U_val, I_val, R_val);

  // --- Ohmova kalkulaƒçka ---
  const inputVoltage = document.getElementById('inputVoltage');
  const inputCurrent = document.getElementById('inputCurrent');
  const inputResistance = document.getElementById('inputResistance');
  const calcBtn = document.getElementById('calcBtn');
  const calcResult = document.getElementById('calcResult');

  calcBtn.addEventListener('click', () => {
    let U = parseFloat(inputVoltage.value);
    let I = parseFloat(inputCurrent.value);
    let R = parseFloat(inputResistance.value);

    // Spoƒç√≠t√°me chybƒõj√≠c√≠ veliƒçinu (pokud zad√°ny dvƒõ)
    const inputs = [U, I, R].filter(v => !isNaN(v));
    if(inputs.length < 2) {
      calcResult.textContent = "Zadejte hodnoty alespo≈à dvou veliƒçin.";
      return;
    }

    if(isNaN(U)) {
      // U = I √ó R
      if(I == 0 || R == 0){
        calcResult.textContent = "Nelze spoƒç√≠tat napƒõt√≠, proto≈æe proud nebo odpor je nula.";
        return;
      }
      U = I * R;
      calcResult.textContent = `Napƒõt√≠ (U) = ${U.toFixed(2)} V`;
    } else if(isNaN(I)) {
      // I = U / R
      if(R == 0){
        calcResult.textContent = "Nelze spoƒç√≠tat proud, odpor nesm√≠ b√Ωt nula.";
        return;
      }
      I = U / R;
      calcResult.textContent = `Proud (I) = ${I.toFixed(2)} A`;
    } else if(isNaN(R)) {
      // R = U / I
      if(I == 0){
        calcResult.textContent = "Nelze spoƒç√≠tat odpor, proud nesm√≠ b√Ωt nula.";
        return;
      }
      R = U / I;
      calcResult.textContent = `Odpor (R) = ${R.toFixed(2)} Œ©`;
    } else {
      calcResult.textContent = "V≈°echny t≈ôi veliƒçiny jsou zadan√©, odpoƒç√≠tat nelze.";
    }
  });
</script>

</body>
</html>
